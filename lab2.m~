f = @(x)exp(-x/6)

Cquadgk = 1/quadgk(f, 0, Inf)

x = linspace(0,1000,100000)
dx = x(2)-x(1)
y = f(x)
Ctrapxz = 1/trapz(x, y)
Csum = 1/sum(dx*y)

Canal = 1/6


% 2.2
fx = @(x)exp(-x/6)/6
dystrybuanta = @(x)(1-exp(-x/6))

x = linspace(0,30,1000)
dx = x(2)-x(1)
tab_fx = fx(x)
tab_dyst_anal = dystrybuanta(x)
tab_dyst_cumsum = cumsum(dx * tab_fx)
tab_dyst_cumtrapz = cumtrapz(dx * tab_fx)
sp1 = subplot(211)
plot(sp1, x, tab_fx)
ylabel('pdf')
sp2 = subplot(212)
hold on
plot(sp2, x, tab_dyst_anal, '-r', 'LineWidth', 4)
plot(sp2, x, tab_dyst_cumsum,  '--g', 'LineWidth', 3)
plot(sp2, x, tab_dyst_cumtrapz,  '--b', 'LineWidth', 2)
xlabel('x')
ylabel('cdf')
legend('Analityczny', 'Cumsum', 'Cumtrapz')

expected_value = quadgk(@(x)(x.*fx(x)), 0, Inf)
std = sqrt(quadgk(@(x)(x-expected_value).^2.*fx(x),0, Inf))
variance = std^2
mode = 0 %...? 
search_kwantyla = @(x, a)(abs(dystrybuanta(x)-a))
plot(sp2, x, search_kwantyla(x, 0.5))
[smiec, mediana_idx] = min(search_kwantyla(x, 0.5))
mediana = x(mediana_idx)
[smiec, kwantyl1_idx] = min(search_kwantyla(x, 0.25))
kwantyl1 = x(kwantyl1_idx)
[smiec, kwantyl3_idx] = min(search_kwantyla(x, 0.75))
kwantyl3 = x(kwantyl3_idx)

line((mediana,mediana),(0, dystrybuanta(mediana))